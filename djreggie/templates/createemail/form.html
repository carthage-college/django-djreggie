{% extends "djkorra/base.html" %}
<!doctype html>
<html lang='en'>
<head>
    <meta charset='utf-8' />
    <title>Create Email Form</title>
    <link rel='stylesheet' type='text/css' href='{{static_url}}djbuis/css/base_css.css'/>
    <link href="//www.carthage.edu/themes/shared/css/icons.css" type="text/css" rel="stylesheet" />
    <link href="//www.carthage.edu/static/vendor/dashboard/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="//www.carthage.edu/themes/shared/css/forms.css" rel="stylesheet" type="text/css" />
    <link href="//www.carthage.edu/themes/shared/css/tables.css" rel="stylesheet" type="text/css" />
    {% block javascript %}
    <script type='text/javascript'>
        function validate_unique_id(){
            var id = document.getElementById('id_unique_id');
            var val = id.value;
            var patt = new RegExp('^(\\d{5,7})$');
            return patt.test(val);
        }
        function validate_requested_by(){
             var id = document.getElementById('id_requested_by');
            var val = id.value;
            var patt = new RegExp('^((?:[a-zA-Z]+\\s?){1,2}[a-zA-Z]+)$');
            return patt.test(val);       
        }
        function validate_name_of_account_requested(){
             var id = document.getElementById('id_name_of_account_requested');
            var val = id.value;
            var patt = new RegExp('^[A-Za-z0-9\.\_\%\+\-]+@[A-Za-z0-9\.\-]+\\.[a-zA-Z]{2,4}$');
            return patt.test(val);       
        }
        function validate_purpose_of_account(){
             var id = document.getElementById('id_purpose_of_account');
            var val = id.value;
            var patt = new RegExp('.+');
            return patt.test(val);       
        }
        function validate_names_of_all_users(){
             var id = document.getElementById('id_names_of_all_users');
            var val = id.value;
            var patt = new RegExp('.+');
            return patt.test(val);       
        }
        function validate_needed_until(){
            var id = document.getElementById('id_needed_until');
            var val = id.value;
            var newdate = new Date();
            var value = val.split("-");
            var inputdate = new Date(value[0],value[1]-1,value[2]);
            alert(newdate);
            if (inputdate.getTime() < newdate.getTime()){
                return false;
                }
            else{
                return true;
            }
        }
    </script>
    {% endblock %}
</head>
{% block content %}
<body>
    <div>
    {% if submitted %}
            <h2>Your form has been submitted, thank you</h2>
    {% endif %}
    </div>
    <div>
        <div class='sidebar'>
            <img src='http://imageshack.us/a/img651/7008/carthage1.png'></img>
        </div>
        <div class='mainbar'>
            <div class='header'>
                <span class='headertext'>Email Form</span>
            </div><br>
            <form action='' method='post'>{% csrf_token %}
                {{ form.non_field_errors }}
                <span class='separator'>Personal information</span><hr>
                <table>
                    <tr>
                        <td><span class='fieldlabel'>{{ form.unique_id.label }}</span></td>
                        <td>{{ form.unique_id }}</td>
                        <td>
                            <img class='hidden' id='unique_id_yes' src='http://imageshack.us/a/img716/1391/htj.png'></img>
                            <img class='hidden' id='unique_id_no' src='http://imageshack.us/a/img855/1123/ytjo.png'></img>
                            {% for e in form.unique_id.errors %}
                                <span class ='error'>*{{ e }}</span>
                            {% endfor %}
                        </td>
                    </tr>
                    <tr>
                        <td><span class='fieldlabel'>{{ form.requested_by.label }}</span></td>
                        <td>{{ form.requested_by }}</td>
                        <td>
                            <img class='hidden' id='requested_by_yes' src='http://imageshack.us/a/img716/1391/htj.png'></img>
                            <img class='hidden' id='requested_by_no' src='http://imageshack.us/a/img855/1123/ytjo.png'></img>
                            {% for e in form.requested_by.errors %}
                                <span class ='error'>*{{ e }}</span>
                            {% endfor %}
                        </td>
                    </tr>
                </table><br>
                <span class='separator'>Account information</span><hr>
                <table>
                    <tr>
                        <td><span class='fieldlabel'>{{ form.name_of_account_requested.label }}</span></td>
                        <td>{{ form.name_of_account_requested }}</td>
                        <td>
                            <img class='hidden' id='name_of_account_requested_yes' src='http://imageshack.us/a/img716/1391/htj.png'></img>
                            <img class='hidden' id='name_of_account_requested_no' src='http://imageshack.us/a/img855/1123/ytjo.png'></img>
                            {% for e in form.name_of_account_requested.errors %}
                                <span class ='error'>*{{ e }}</span>
                            {% endfor %}
                        </td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <td><span class='fieldlabel'>{{ form.purpose_of_account.label }}</span></td>
                        <td>{{ form.purpose_of_account }}</td>
                        <td>
                            <img class='hidden' id='purpose_of_account_yes' src='http://imageshack.us/a/img716/1391/htj.png'></img>
                            <img class='hidden' id='purpose_of_account_no' src='http://imageshack.us/a/img855/1123/ytjo.png'></img>
                            {% for e in form.purpose_of_account.errors %}
                                <span class ='error'>*{{ e }}</span>
                            {% endfor %}
                        </td>
                    </tr>
                    <tr>
                        <td><span class='fieldlabel'>{{ form.names_of_all_users.label }}</span></td>
                        <td>{{ form.names_of_all_users }}</td>
                        <td>
                            <img class='hidden' id='names_of_all_users_yes' src='http://imageshack.us/a/img716/1391/htj.png'></img>
                            <img class='hidden' id='names_of_all_users_no' src='http://imageshack.us/a/img855/1123/ytjo.png'></img>
                            {% for e in form.names_of_all_users.errors %}
                                <span class ='error'>*{{ e }}</span>
                            {% endfor %}
                        </td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <td><span class='fieldlabel'>{{ form.needed_until.label }}</span></td>
                        <td>{{ form.needed_until }}</td>
                        <td>
                            <img class='hidden' id='needed_until_yes' src='http://imageshack.us/a/img716/1391/htj.png'></img>
                            <img class='hidden' id='needed_until_no' src='http://imageshack.us/a/img855/1123/ytjo.png'></img>
                            {% for e in form.needed_until.errors %}
                                <span class ='error'>*{{ e }}</span>
                            {% endfor %}
                        </td>
                    </tr>
                </table><br><br>
                <input type="submit" value="Submit form">
            </form>
        </div>
    </div>
</body>
    <script type='text/javascript'>
        document.getElementById('unique_id_no').style.display='none';
        document.getElementById('unique_id_yes').style.display='none';
        document.getElementById('requested_by_no').style.display='none';
        document.getElementById('requested_by_yes').style.display='none';
        document.getElementById('name_of_account_requested_no').style.display='none';
        document.getElementById('name_of_account_requested_yes').style.display='none';
        document.getElementById('needed_until_no').style.display='none';
        document.getElementById('needed_until_yes').style.display='none';
        document.getElementById('purpose_of_account_no').style.display='none';
        document.getElementById('purpose_of_account_yes').style.display='none';
        document.getElementById('names_of_all_users_no').style.display='none';
        document.getElementById('names_of_all_users_yes').style.display='none';
        var element = document.getElementById('id_unique_id');
        element.onblur = function() {
            var n=document.getElementById('unique_id_no');
            var y=document.getElementById('unique_id_yes');
            if(!validate_unique_id()){ 
                n.style.display='inline'; y.style.display='none'; 
            }
            else {
                n.style.display='none'; y.style.display='inline';
            }
        };
        element = document.getElementById('id_requested_by')
        element.onblur = function() {
            var n=document.getElementById('requested_by_no');
            var y=document.getElementById('requested_by_yes');
            if(!validate_requested_by()){ 
                n.style.display='inline'; y.style.display='none'; 
            }
            else {
                n.style.display='none'; y.style.display='inline';
            }
        };
        element = document.getElementById('id_name_of_account_requested')
        element.onblur = function() {
            var n=document.getElementById('name_of_account_requested_no');
            var y=document.getElementById('name_of_account_requested_yes');
            if(!validate_name_of_account_requested()){ 
                n.style.display='inline'; y.style.display='none'; 
            }
            else {
                n.style.display='none'; y.style.display='inline';
            }
        };
        element = document.getElementById('id_needed_until')
        element.onblur = function() {                               
            var n=document.getElementById('needed_until_no');
            var y=document.getElementById('needed_until_yes');
            if(!validate_needed_until()){ 
                n.style.display='inline'; y.style.display='none'; 
            }
            else {
                n.style.display='none'; y.style.display='inline';
            }
        };
        element = document.getElementById('id_purpose_of_account')
        element.oninput = function() {                               
            var n=document.getElementById('purpose_of_account_no');
            var y=document.getElementById('purpose_of_account_yes');
            if(!validate_purpose_of_account()){ 
                n.style.display='inline'; y.style.display='none'; 
            }
            else {
                n.style.display='none'; y.style.display='inline';
            }
        };
        element = document.getElementById('id_names_of_all_users')
        element.oninput = function() {                               
            var n=document.getElementById('names_of_all_users_no');
            var y=document.getElementById('names_of_all_users_yes');
            if(!validate_names_of_all_users()){ 
                n.style.display='inline'; y.style.display='none'; 
            }
            else {
                n.style.display='none'; y.style.display='inline';
            }
        };        
    </script>
    {% endblock %}
</html>
